<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>부태리의 연봉+자산 기준 투자단지 찾기</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      width: 90%;
      margin: auto;
      padding: 20px;
      background-color: #f9f9f9;
      box-sizing: border-box;
    }
    h2 { text-align: center; margin-bottom: 20px; }
    label { font-weight: bold; margin-top: 10px; display: block; }
    input, button {
      width: 100%; padding: 12px; margin-bottom: 15px; font-size: 1rem; box-sizing: border-box;
    }
    input[type="checkbox"], input[type="radio"] {
      width: auto; margin-right: 6px;
    }
    .checkbox-label { display: flex; align-items: center; margin-bottom: 10px; font-size: 0.95rem; }
    button {
      background-color: #4CAF50; color: white; border: none; cursor: pointer; font-weight: bold;
    }
    button:hover { background-color: #45a049; }
    .result {
      background-color: #fff; border-radius: 5px; padding: 15px;
      margin-top: 20px; font-size: 0.95rem; line-height: 1.5;
    }
    span.hangul {
      font-size: 0.9rem; color: #555; display: block;
      margin-top: -10px; margin-bottom: 10px;
    }
    .section-title {
      font-weight: bold; margin: 20px 0 10px; font-size: 1.05rem;
    }
    footer {
      margin-top: 30px; text-align: center; font-size: 0.9rem; color: #555;
    }
    footer a { color: #555; text-decoration: none; }
    .calculation-steps {
      background-color: #f5f5f5;
      border-left: 3px solid #4CAF50;
      padding: 10px;
      margin: 15px 0;
      font-size: 0.9rem;
    }
    .hint { font-size: 0.85rem; color: #666; margin-left: 4px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    details { margin: 8px 0; }
    details > summary { cursor: pointer; }
    table { border-collapse: collapse; }
    th, td { padding: 6px 8px; border: 1px solid #ddd; }
    thead { background:#eee; }
  </style>
</head>
<body>
  <h2>부태리의 투자단지 찾기 + 대출 계산기 (개선버전)</h2>

  <label>연봉 (만원)</label>
  <input type="number" id="income" oninput="updateHangulAmount('income')">
  <span id="incomeText" class="hangul"></span>

  <label>가진 자산 (만원)</label>
  <input type="number" id="assets" oninput="updateHangulAmount('assets')">
  <span id="assetsText" class="hangul"></span>

  <label>기존 대출 월 상환금 (만원)</label>
  <input type="number" id="existingLoanMonthly">

  <label>대출 금리 (연 %, 소수점 가능)</label>
  <input type="number" id="interestRate" step="0.01">

  <label>상환 기간 (년)</label>
  <input type="number" id="loanTerm">

  <div class="checkbox-label">
    <input type="checkbox" id="speculativeArea" onchange="applyPolicyRates()">
    <label for="speculativeArea">투기지역 여부</label>
  </div>
  <div class="checkbox-label">
    <input type="checkbox" id="firstTimeBuyer" onchange="applyPolicyRates()">
    <label for="firstTimeBuyer">생애최초 여부</label>
  </div>

  <!-- ✅ 수도권 여부 체크박스 -->
  <div class="checkbox-label">
    <input type="checkbox" id="capitalArea">
    <label for="capitalArea">수도권 여부 <span class="hint">체크 시 최대 대출한도 6억원 적용 (2025-06-27 정책)</span></label>
  </div>

  <div class="checkbox-label">
    <input type="checkbox" id="stressDSR2" onchange="toggleStressLevel(2)">
    <label for="stressDSR2">스트레스 DSR 2단계</label>
  </div>
  <div id="regionOptions" style="display:none; margin-bottom:10px;">
    <div class="checkbox-label">
      <input type="radio" name="region" value="capital" checked>
      <label>수도권 (+1.2%)</label>
    </div>
    <div class="checkbox-label">
      <input type="radio" name="region" value="noncapital">
      <label>비수도권 (+0.75%)</label>
    </div>
  </div>
  <div class="checkbox-label">
    <input type="checkbox" id="stressDSR3" onchange="toggleStressLevel(3)">
    <label for="stressDSR3">스트레스 DSR 3단계 (+1.5%)</label>
<div id="stressDSR3Explain" style="display: none; margin: 10px 0; font-size: 0.9rem; background: #eef; padding: 10px; border-radius: 5px;">
📌 스트레스 DSR 3단계를 적용하면 대출 금리에 아래 표에 따라 가산 금리가 더해집니다.
<table style="width:100%; font-size: 0.9rem; margin: 10px 0;">
<thead>
<tr><th>고정금리 기간</th><th>혼합형 가산금리</th><th>주기형 가산금리</th></tr>
</thead>
<tbody>
<tr><td>5년 미만</td><td>+1.5%</td><td>+1.5%</td></tr>
<tr><td>5~9년</td><td>+1.2%</td><td>+0.6%</td></tr>
<tr><td>9~15년</td><td>+0.9%</td><td>+0.45%</td></tr>
<tr><td>15~21년</td><td>+0.6%</td><td>+0.3%</td></tr>
<tr><td>21년 이상</td><td>0%</td><td>0%</td></tr>
</tbody>
</table>
<p style="margin-top:10px; font-size:0.9rem;">
📌 <strong>TIP</strong><br>
1️⃣ 주기형과 혼합형은 고정금리 기간이 길수록 스트레스 DSR 가산금리가 낮아집니다.<br>
2️⃣ 변동형은 고정금리 기간과 관계없이 <strong>+1.5%</strong>가 항상 적용됩니다.
</p>

</div>
<div id="dsr3Options" style="display: none; margin-bottom: 10px;">
  <label>📌 대출 유형</label>
  <div class="checkbox-label">
    <input type="radio" name="loanType" value="mixed" onclick="updateDSR3Options()" checked> 혼합형
  </div>
  <div class="checkbox-label">
    <input type="radio" name="loanType" value="periodic" onclick="updateDSR3Options()"> 주기형
  </div>
  <div class="checkbox-label">
    <input type="radio" name="loanType" value="floating" onclick="updateDSR3Options()"> 변동형
  </div>
  <label>고정금리 기간 (30년 만기 기준)</label>
  <select id="fixedRateTerm">
    <option value="0">5년 미만</option>
    <option value="7">5~9년</option>
    <option value="12">9~15년</option>
    <option value="18">15~21년</option>
    <option value="25">21년 이상</option>
  </select>
</div>

  </div>

  <div class="section-title">📌 상환 방식 선택</div>
  <div class="checkbox-label">
    <input type="radio" name="repaymentType" value="equalPrincipalInterest" checked>
    <label>원리금 균등 상환</label>
  </div>
  <div class="checkbox-label">
    <input type="radio" name="repaymentType" value="equalPrincipal">
    <label>원금 균등 상환</label>
  </div>

  <div class="section-title">📌 수동 비율 조정</div>
  <label>LTV 비율 (%)</label>
  <input type="number" id="ltvInput" step="0.1" value="70">
  <label>DTI 비율 (%)</label>
  <input type="number" id="dtiInput" step="0.1" value="60">
  <label>DSR 비율 (%)</label>
  <input type="number" id="dsrInput" step="0.1" value="40">
  
  <div class="checkbox-label">
    <input type="checkbox" id="showCalculations">
    <label for="showCalculations">계산 과정 보기</label>
  </div>

  <button onclick="calculateLoan()">계산하기</button>
  <div class="result" id="result"></div>
  <div id="calculationSteps" class="calculation-steps" style="display: none;"></div>

  <footer>
    <p>협업 및 수정 문의</p>
    <p><a href="https://litt.ly/richdadtechtree" target="_blank">https://litt.ly/richdadtechtree</a></p>
  </footer>

  <script>
    /* ---------- 유틸 ---------- */
    function numberToKorean(num) {
      const units = ["", "만", "억", "조", "경"];
      const digits = ["", "일", "이", "삼", "사", "오", "육", "칠", "팔", "구"];
      const smallUnits = ["", "십", "백", "천"];
      num = num * 10000;
      if (num === 0) return "영";
      const parts = [];
      while (num > 0) {
        parts.push(num % 10000);
        num = Math.floor(num / 10000);
      }
      return parts.map((chunk, idx) => {
        if (chunk === 0) return "";
        let str = chunk.toString().padStart(4, "0"), out = "";
        str.split("").map(Number).forEach((n, i) => {
          if (n === 0) return;
          const u = smallUnits[3 - i];
          out += (n === 1 && u ? u : digits[n] + u);
        });
        return out + units[idx];
      }).reverse().join("");
    }
    function updateHangulAmount(id) {
      const v = parseInt(document.getElementById(id).value, 10);
      document.getElementById(id + "Text").innerText =
        isNaN(v) ? "" : "→ " + numberToKorean(v) + "원";
    }
    function formatAmount(amount) {
      const billion = Math.floor(amount / 10000);
      const million = amount % 10000;
      if (billion > 0) return million > 0 ? `${billion}억 ${million}만원` : `${billion}억원`;
      return `${million}만원`;
    }
    const fmt = (n, d=6) => Number(n).toLocaleString(undefined,{maximumFractionDigits:d});
    const pct = (x, d=3) => `${(x*100).toFixed(d)}%`;

    /* ---------- 정책 LTV/DTI/DSR 반영 ---------- */
    function applyPolicyRates() {
      const spec = document.getElementById("speculativeArea").checked;
      const first = document.getElementById("firstTimeBuyer").checked;
      let ltv = 70, dti = 60, dsr = 40;
      if (spec && first) { ltv = 70; dti = 60; dsr = 40; }   // 규제지역+생초 70%
      else if (spec) { ltv = 40; dti = 40; dsr = 40; }       // 규제지역 일반
      else if (first) { ltv = 80; dti = 60; dsr = 40; }      // 비규제 생초
      document.getElementById("ltvInput").value = ltv;
      document.getElementById("dtiInput").value = dti;
      document.getElementById("dsrInput").value = dsr;
    }

    /* ---------- 스트레스 DSR 토글 ---------- */
    function toggleStressLevel(level) {
      const dsr2 = document.getElementById("stressDSR2");
      const dsr3 = document.getElementById("stressDSR3");
      if (level === 2) {
        dsr3.checked = false;
        document.getElementById("regionOptions").style.display = dsr2.checked ? "block" : "none";
        document.getElementById("stressDSR3Explain").style.display = "none";
        document.getElementById("dsr3Options").style.display = "none";
      } else {
        dsr2.checked = false;
        document.getElementById("regionOptions").style.display = "none";
        document.getElementById("stressDSR3Explain").style.display = dsr3.checked ? "block" : "none";
        document.getElementById("dsr3Options").style.display = dsr3.checked ? "block" : "none";
      }
    }

    /* ---------- 상환공식 ---------- */
    // 원리금균등 월상환금
    function calculateMonthlyPayment(principal, rate, months) {
      const monthlyRate = rate / 12;
      if (monthlyRate === 0) return principal / months; // 0% 금리 안전 처리
      return principal * monthlyRate * Math.pow(1 + monthlyRate, months) / (Math.pow(1 + monthlyRate, months) - 1);
    }
    // 원금균등 첫달 상환금
    function calculateInitialEqualPrincipalPayment(principal, rate, months) {
      const monthlyPrincipal = principal / months;
      const monthlyInterest = principal * (rate / 12);
      return monthlyPrincipal + monthlyInterest;
    }

    /* ---------- DSR 한도 계산 ---------- */
    function calculateDSRLimit(income, dsrRatio, existingLoanMonthly, stressRate, months, repayType) {
      const annualMaxPayment = income * dsrRatio;
      const monthlyMaxPayment = annualMaxPayment / 12;
      const availableMonthlyPayment = monthlyMaxPayment - existingLoanMonthly;
      if (availableMonthlyPayment <= 0) return 0;

      const monthlyRate = stressRate / 12;
      let dsrLimit = 0;
      if (repayType === "equalPrincipalInterest") {
        if (monthlyRate === 0) {
          dsrLimit = availableMonthlyPayment * months; // 0% 금리 안전 처리
        } else {
          dsrLimit = availableMonthlyPayment * (1 - Math.pow(1 + monthlyRate, -months)) / monthlyRate;
        }
      } else {
        dsrLimit = availableMonthlyPayment / ((1 / months) + monthlyRate);
      }
      return dsrLimit;
    }

    /* ---------- 스트레스 DSR 3단계 가산 ---------- */
    function calculateStress3AdjustmentFromTerm(term, type) {
      if (type === 'floating') return 1.5;
      if (term < 5) return 1.5;
      if (term < 9) return type === 'mixed' ? 1.2 : 0.6;
      if (term < 15) return type === 'mixed' ? 0.9 : 0.45;
      if (term < 21) return type === 'mixed' ? 0.6 : 0.3;
      if (term >= 21) return 0;
      return 0;
    }
    function updateDSR3Options() {
      document.getElementById("stressDSR3").checked = true;
      document.getElementById("stressDSR3Explain").style.display = "block";
      document.getElementById("dsr3Options").style.display = "block";
    }

    /* ---------- 메인 계산 ---------- */
    function calculateLoan() {
      const grossIncome = parseFloat(document.getElementById("income").value);
      const income = grossIncome; // DSR은 세전 기준
      const assets = parseFloat(document.getElementById("assets").value);
      const existingLoan = parseFloat(document.getElementById("existingLoanMonthly").value) || 0;
      const originalRate = parseFloat(document.getElementById("interestRate").value) / 100;
      let stressRate = originalRate;
      const term = parseInt(document.getElementById("loanTerm").value, 10);
      const ltv = parseFloat(document.getElementById("ltvInput").value) / 100;
      const dti = parseFloat(document.getElementById("dtiInput").value) / 100;
      const dsr = parseFloat(document.getElementById("dsrInput").value) / 100;
      const st2 = document.getElementById("stressDSR2").checked;
      const st3 = document.getElementById("stressDSR3").checked;
      const repayType = document.querySelector("input[name='repaymentType']:checked").value;
      const showCalcs = document.getElementById("showCalculations").checked;
      const isCapital = document.getElementById("capitalArea").checked;

      // 스트레스 금리 적용
      if (st2) {
        const region = document.querySelector("input[name='region']:checked").value;
        stressRate += (region === "capital" ? 0.012 : 0.0075);
      }
      if (st3) {
        const type = document.querySelector("input[name='loanType']:checked")?.value || "mixed";
        const termVal = parseFloat(document.getElementById("fixedRateTerm").value);
        stressRate += calculateStress3AdjustmentFromTerm(termVal, type) / 100;
      }

      if ([grossIncome, assets, originalRate, term, ltv, dti, dsr].some(isNaN)) {
        document.getElementById("result").innerText = "모든 값을 정확히 입력해주세요.";
        return;
      }

      const months = term * 12;

      // DTI 한도 (원래 금리의 연간 상환계수 사용)
      const monthlyRateForDTI = originalRate / 12;
      let annuity; // 월 상환계수
      if (monthlyRateForDTI === 0) annuity = 1 / months;
      else annuity = (monthlyRateForDTI * Math.pow(1 + monthlyRateForDTI, months)) / (Math.pow(1 + monthlyRateForDTI, months) - 1);
      const yearlyPay = annuity * 12;
      const dtiLimit = (income * dti) / yearlyPay;

      // DSR 한도
      const dsrLimit = calculateDSRLimit(income, dsr, existingLoan, stressRate, months, repayType);

      // LTV 한도 (자산 기반)
      const loanByLTV = assets * ltv / (1 - ltv);

      // 정책 상한 (수도권 체크 시 6억)
      const policyLimit = isCapital ? 60000 : Infinity; // 만원 단위

      // 최종 한도
      const limits = [
        { type: "DTI", amount: dtiLimit },
        { type: "DSR", amount: dsrLimit },
        { type: "LTV", amount: loanByLTV }
      ];
      if (isCapital) limits.push({ type: "정책상한(6억, 2025-06-27)", amount: policyLimit });

      const minLimit = limits.reduce((min, cur) => cur.amount < min.amount ? cur : min, limits[0]);
      const finalLoan = minLimit.amount;
      const reason = minLimit.type;

      // 월 상환금 계산(표시용은 실제 금리 originalRate 사용)
      let monthlyPay, monthlyPrincipal, monthlyInterest;
      if (repayType === "equalPrincipalInterest") {
        monthlyPay = calculateMonthlyPayment(finalLoan, originalRate, months);
        monthlyPrincipal = finalLoan / months;
        monthlyInterest = monthlyPay - monthlyPrincipal;
      } else {
        monthlyPrincipal = finalLoan / months;
        monthlyInterest = finalLoan * (originalRate / 12);
        monthlyPay = monthlyPrincipal + monthlyInterest; // 첫달 기준
      }

      const investable = assets + finalLoan;
      const avgMonthlyIncome = grossIncome / 12;
      const gap = avgMonthlyIncome - monthlyPay;
      const repayRatio = (monthlyPay / avgMonthlyIncome) * 100;
      const leverageUtil = (finalLoan / (assets + finalLoan)) * 100;

      // 금리 표시
      const stressInfo = (st2 || st3) 
        ? `<strong>DSR 한도 계산에 적용된 스트레스 금리:</strong> ${(stressRate * 100).toFixed(2)}%<br>` +
          `<strong>원리금 계산에 적용된 실제 금리:</strong> ${(originalRate * 100).toFixed(2)}%<br>`
        : `<strong>적용 금리:</strong> ${(originalRate * 100).toFixed(2)}%<br>`;

      // 한도 비교 출력
      let limitsHtml = `<strong>DTI 한도:</strong> ${formatAmount(Math.floor(dtiLimit))}<br>` +
                       `<strong>DSR 한도:</strong> ${formatAmount(Math.floor(dsrLimit))}<br>` +
                       `<strong>LTV 한도:</strong> ${formatAmount(Math.floor(loanByLTV))}<br>`;
      if (isCapital) {
        limitsHtml += `<strong>정책상한:</strong> 6억원 (2025-06-27) <span class="hint">수도권 체크 시 적용</span><br>`;
      }

      document.getElementById("result").innerHTML = stressInfo +
        limitsHtml +
        `<hr>` +
        `💡 <strong>최종 대출 한도는 <u>${reason}</u> 기준으로 <u>${formatAmount(Math.floor(finalLoan))}</u>입니다.</strong><br><br>` +
        `<strong>투자가능 금액대:</strong> 자산 ${formatAmount(Math.floor(assets))} + 대출 ${formatAmount(Math.floor(finalLoan))} = <strong>${formatAmount(Math.floor(investable))}</strong><br>` +
        `<strong>공적 레버리지 이용률:</strong> ${leverageUtil.toFixed(1)}%<br><br>` +
        `<strong>월 상환금:</strong> ${formatAmount(Math.floor(monthlyPay))} (${repayType === "equalPrincipalInterest" ? "원리금 균등" : "원금 균등(첫달 기준)"})<br>` +
        `- 월 원금: ${formatAmount(Math.floor(monthlyPrincipal))}<br>` +
        `- 월 이자: ${formatAmount(Math.floor(monthlyInterest))}<br>` +
        `<hr><strong>📊 월 소득 분석</strong><br>` +
        `- 세전 평균 월급: ${formatAmount(Math.floor(avgMonthlyIncome))}<br>` +
        `- 월 상환 후 남는 금액: ${formatAmount(Math.floor(gap))}<br>` +
        `- 상환 비율: ${repayRatio.toFixed(1)}%`;

      /* ----- 계산 과정(상세) ----- */
      const stepsDiv = document.getElementById("calculationSteps");
      if (showCalcs) {
        // DSR 중간값
        const dsrAnnualMax = income * dsr;
        const dsrMonthlyMax = dsrAnnualMax / 12;
        const dsrAvailable = dsrMonthlyMax - existingLoan;

        // 월상환 공식 세부
        const r_m = originalRate / 12;
        const n = months;
        const P = finalLoan;

        let pow = Math.pow(1 + r_m, n);
        let annuityFactor = (r_m === 0) ? (1 / n) : (r_m * pow) / (pow - 1);
        const monthlyByFormula = P * annuityFactor;

        // 원금균등 추가 설명(첫달/둘째달)
        const eqPrin_monthlyPrincipal = P / n;
        const eqPrin_interest1 = P * r_m;
        const eqPrin_pay1 = eqPrin_monthlyPrincipal + eqPrin_interest1;
        const principalAfter1 = P - eqPrin_monthlyPrincipal;
        const eqPrin_interest2 = principalAfter1 * r_m;
        const eqPrin_pay2 = eqPrin_monthlyPrincipal + eqPrin_interest2;

        const repayExplain = (repayType === "equalPrincipalInterest")
          ? `
          <h3>✅ 월 상환금 산출 방식 (원리금 균등)</h3>
          <div class="mono">
          M = P × r × (1+r)<sup>n</sup> / [(1+r)<sup>n</sup> − 1]<br>
          └ 대입: P = ${formatAmount(Math.floor(P))}, r = ${pct(r_m,4)} (월), n = ${n}개월<br>
          (1+r)<sup>n</sup> = ${fmt(pow,6)}<br>
          월 상환계수 = ${fmt(annuityFactor,8)}<br>
          ⇒ 월 상환금 M = P × 월상환계수 = ${formatAmount(Math.floor(monthlyByFormula))}<br>
          </div>
          <details><summary>왜 이렇게 되나요?</summary>
            <p>매월 동일한 금액 M을 내되, 남은 원금에 대한 이자가 줄어들면서 원금 상환 비중이 커지는 구조입니다.
            위 공식은 연금현가식에서 유도한 표준식입니다.</p>
          </details>
          `
          : `
          <h3>✅ 월 상환금 산출 방식 (원금 균등)</h3>
          <div class="mono">
          월원금 = P / n = ${fmt(eqPrin_monthlyPrincipal,2)} 만원<br>
          첫달 이자 = P × r = ${fmt(eqPrin_interest1,2)} 만원 (r=${pct(r_m,4)}/월)<br>
          첫달 상환 = 월원금 + 첫달 이자 = ${fmt(eqPrin_pay1,2)} 만원<br>
          둘째달 이자 = (P - 월원금) × r = ${fmt(eqPrin_interest2,2)} 만원<br>
          둘째달 상환 = 월원금 + 둘째달 이자 = ${fmt(eqPrin_pay2,2)} 만원<br>
          ⇒ 시간이 지날수록 이자가 줄어 총 상환액이 점점 감소합니다.
          </div>
          <details><summary>참고</summary>
            <p>표시된 월 상환금은 첫달 기준입니다. 실제로는 매월 이자가 줄어 총 납입액이 내려갑니다.</p>
          </details>
          `;

        const dtiExplain = `
          <h3>✅ DTI 한도 계산</h3>
          <div class="mono">
          연간 상환계수 = 월 상환계수 × 12 = ${fmt(annuity,8)} × 12 = ${fmt(annuity*12,8)}<br>
          DTI 한도 = (연소득 × DTI비율) / 연간 상환계수 = (${fmt(income)} × ${pct(dti)}) / ${fmt(annuity*12,8)}
          = ${formatAmount(Math.floor(dtiLimit))}
          </div>
        `;

        const dsrExplain = `
          <h3>✅ DSR 한도 계산</h3>
          <div class="mono">
          1) 세전 연소득 × DSR비율 = 연 최대 원리금: ${formatAmount(Math.floor(dsrAnnualMax))}<br>
          2) 월 최대 원리금: ${formatAmount(Math.floor(dsrMonthlyMax))}<br>
          3) 기존 대출 월 상환액: ${formatAmount(Math.floor(existingLoan))}<br>
          4) 가용 월 상환액: ${formatAmount(Math.floor(dsrAvailable))}<br>
          5) 스트레스 금리(DSR용): ${pct(stressRate)} (월 ${pct(stressRate/12,4)})<br>
          6) 대출기간: ${term}년 (${n}개월)
          </div>
        `;

        stepsDiv.innerHTML = `
          <h3>✅ 한도 비교 계산 과정</h3>
          <p>・ DTI 한도: ${formatAmount(Math.floor(dtiLimit))}</p>
          <p>・ DSR 한도: ${formatAmount(Math.floor(dsrLimit))}</p>
          <p>・ LTV 한도: ${formatAmount(Math.floor(loanByLTV))}</p>
          ${isCapital ? `<p>・ 정책상한: 6억원 (2025-06-27)</p>` : ``}
          <p>⇒ 최종 한도는 위 값 중 <strong>가장 작은 값</strong>입니다.</p>
          <hr>
          ${repayExplain}
          <hr>
          ${dtiExplain}
          <hr>
          ${dsrExplain}
        `;
        stepsDiv.style.display = "block";
      } else {
        stepsDiv.style.display = "none";
      }
    }

    window.onload = applyPolicyRates;
  </script>
</body>
</html>
